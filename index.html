<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>זירת הצורות - אתגר הזמן</title>
<link href="https://fonts.googleapis.com/css2?family=Rubik:wght@400;700;900&display=swap" rel="stylesheet">
<style>
    :root {
        --bg-color: #0f172a;
        --text-color: #f8fafc;
        --accent-color: #38bdf8;
        --danger-color: #ef4444;
        --success-color: #4ade80;
    }
    * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
        font-family: 'Rubik', sans-serif;
    }
    body {
        background-color: var(--bg-color);
        color: var(--text-color);
        display: flex;
        flex-direction: column;
        min-height: 100vh;
        overflow-x: hidden;
    }
    #home-screen, #game-screen {
        width: 100%;
        flex: 1;
        display: flex;
        flex-direction: column;
        align-items: center;
    }
    #game-screen.hidden { display: none; }
    #home-screen.hidden { display: none; }
    #home-screen {
        justify-content: center;
        gap: 40px;
        padding: 20px;
        text-align: center;
    }
    .hero-title {
        font-size: 60px;
        font-weight: 900;
        color: var(--accent-color);
        text-shadow: 0 0 30px rgba(56, 189, 248, 0.6);
        margin-bottom: 20px;
    }
    .instructions {
        font-size: 20px;
        max-width: 600px;
        line-height: 1.6;
        color: #cbd5e1;
    }
    #last-score-display {
        font-size: 24px;
        color: var(--success-color);
        margin-top: 10px;
        font-weight: bold;
    }
    .start-btn {
        background: linear-gradient(45deg, var(--accent-color), #3b82f6);
        color: white;
        border: none;
        padding: 20px 60px;
        font-size: 28px;
        font-weight: 900;
        border-radius: 50px;
        cursor: pointer;
        box-shadow: 0 10px 25px rgba(56, 189, 248, 0.4);
        transition: transform 0.2s, box-shadow 0.2s;
    }
    .start-btn:hover {
        transform: translateY(-5px) scale(1.05);
        box-shadow: 0 15px 35px rgba(56, 189, 248, 0.6);
    }
    .credit {
        margin-top: 30px;
        font-size: 16px;
        color: #94a3b8;
    }
    header {
        width: 100%;
        padding: 15px 20px;
        background: #1e293b;
        box-shadow: 0 4px 15px rgba(0,0,0,0.3);
        display: flex;
        justify-content: space-between;
        align-items: center;
        position: relative;
    }
    .stats-container {
        display: flex;
        gap: 15px;
    }
    .stat-box {
        background: #334155;
        padding: 8px 15px;
        border-radius: 8px;
        border: 1px solid #475569;
        font-weight: bold;
        font-size: 16px;
        white-space: nowrap;
    }
    #timer-bar-container {
        position: absolute;
        bottom: 0;
        left: 0;
        width: 100%;
        height: 6px;
        background: #334155;
    }
    #timer-bar {
        height: 100%;
        background: linear-gradient(90deg, var(--success-color), var(--accent-color));
        width: 100%;
        transition: width 1s linear;
    }
    main {
        flex: 1;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        width: 100%;
        max-width: 1000px;
        padding: 20px;
        margin: 0 auto;
    }
    .word-wrapper {
        position: relative;
        flex: 1;
        height: 250px;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        margin-bottom: 30px;
        width: 100%;
    }
    #current-word {
        font-size: 70px;
        font-weight: 900;
        color: #ffffff;
        text-shadow: 0 0 25px rgba(255, 255, 255, 0.3);
        text-align: center;
    }
    #correct-answer-display {
        position: absolute;
        bottom: 10px;
        font-size: 24px;
        color: #facc15;
        font-weight: bold;
        opacity: 0;
        transition: opacity 0.3s;
        text-shadow: 0 0 15px rgba(250, 204, 21, 0.6);
        pointer-events: none;
    }
    .buttons-horizontal {
        display: flex;
        flex-wrap: wrap;
        justify-content: center;
        gap: 12px;
        width: 100%;
        padding-bottom: 20px;
    }
    button.category-btn {
        flex: 1 1 160px;
        background: #1e293b;
        color: var(--text-color);
        border: 2px solid transparent;
        border-radius: 12px;
        padding: 15px 10px;
        font-size: 18px;
        font-weight: 700;
        cursor: pointer;
        transition: all 0.2s;
        box-shadow: 0 6px 0 #0f172a;
        text-align: center;
        min-height: 70px;
        display: flex;
        align-items: center;
        justify-content: center;
    }
    button.category-btn:active {
        transform: translateY(6px);
        box-shadow: 0 0 0 #0f172a;
    }
    button[data-type="base_suffix"] { border-color: #ef4444; }
    button[data-type="foreign"] { border-color: #3b82f6; }
    button[data-type="root_pattern"] { border-color: #10b981; }
    button[data-type="blend"] { border-color: #f59e0b; }
    button[data-type="acronym"] { border-color: #8b5cf6; }
    button[data-type="base_suffix"]:hover { background: rgba(239, 68, 68, 0.15); }
    button[data-type="foreign"]:hover { background: rgba(59, 130, 246, 0.15); }
    button[data-type="root_pattern"]:hover { background: rgba(16, 185, 129, 0.15); }
    button[data-type="blend"]:hover { background: rgba(245, 158, 11, 0.15); }
    button[data-type="acronym"]:hover { background: rgba(139, 92, 246, 0.15); }
    .correct-anim { animation: pop 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275); color: var(--success-color) !important; text-shadow: 0 0 30px var(--success-color) !important; }
    .wrong-anim { animation: shake 0.4s ease-in-out; color: var(--danger-color) !important; text-shadow: 0 0 30px var(--danger-color) !important; }
    @keyframes pop { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.3); } }
    @keyframes shake { 0%, 100% { transform: translateX(0); } 20%, 60% { transform: translateX(-12px); } 40%, 80% { transform: translateX(12px); } }
    .feedback-particles { position: absolute; pointer-events: none; font-size: 40px; opacity: 0; font-weight: bold; z-index: 100; }
    @media (max-width: 768px) {
        .hero-title { font-size: 40px; }
        #current-word { font-size: 45px; }
        header { flex-direction: column; gap: 10px; padding-bottom: 15px; }
        .stats-container { width: 100%; justify-content: space-between; }
        .stat-box { font-size: 14px; padding: 6px 10px; }
        button.category-btn { font-size: 16px; padding: 10px; }
        #correct-answer-display { font-size: 18px; bottom: 0; }
    }
</style>
</head>
<body>

<section id="home-screen">
    <div>
        <h1 class="hero-title">זירת הצורות</h1>
        <p class="instructions">יש לכם 60 שניות!<br>זהו את דרך התצורה של המילה שמופיעה על המסך.<br>תשובות נכונות ברצף יכפילו את הניקוד.</p>
        <div id="last-score-display"></div>
        <div class="credit">נוצר על ידי עוז וברק טייבלום</div>
    </div>
    <button class="start-btn" onclick="startGame()">התחל משחק!</button>
</section>

<section id="game-screen" class="hidden">
    <header>
        <div class="stats-container">
             <div class="stat-box" style="color: var(--accent-color)">זמן: <span id="time-left">60</span></div>
        </div>
        <div class="stats-container">
            <div class="stat-box">רצף: <span id="streak" style="color: #facc15">0</span></div>
            <div class="stat-box">ניקוד: <span id="score" style="color: var(--success-color)">0</span></div>
        </div>
        <div id="timer-bar-container">
            <div id="timer-bar"></div>
        </div>
    </header>

    <main>
        <div class="word-wrapper">
            <div id="current-word">מתחילים...</div>
            <div id="correct-answer-display"></div>
        </div>
        <div class="buttons-horizontal">
            <button class="category-btn" data-type="base_suffix">בסיס + צורן סופי</button>
            <button class="category-btn" data-type="foreign">שאילה מלעוזית</button>
            <button class="category-btn" data-type="root_pattern">שורש + משקל</button>
            <button class="category-btn" data-type="blend">הלחם בסיסים</button>
            <button class="category-btn" data-type="acronym">ראשי תיבות (נוטריקון)</button>
        </div>
    </main>
</section>

<script>
    const typeNamesHebrew = {
        "base_suffix": "בסיס + צורן סופי",
        "foreign": "שאילה מלעוזית",
        "root_pattern": "שורש + משקל",
        "blend": "הלחם בסיסים",
        "acronym": "ראשי תיבות (נוטריקון)"
    };

    const words = [
        { word: "עיתונאי", type: "base_suffix" }, { word: "ספרן", type: "base_suffix" }, { word: "חללית", type: "base_suffix" }, { word: "מכונית", type: "base_suffix" }, { word: "צנצנת", type: "base_suffix" }, { word: "בנקאי", type: "base_suffix" }, { word: "משאית", type: "base_suffix" }, { word: "שבועון", type: "base_suffix" }, { word: "יומון", type: "base_suffix" }, { word: "ירחון", type: "base_suffix" }, { word: "תקליטור", type: "base_suffix" }, { word: "מחשבון", type: "base_suffix" }, { word: "שקרן", type: "base_suffix" }, { word: "עצלן", type: "base_suffix" }, { word: "ספריה", type: "base_suffix" }, { word: "פעלולן", type: "base_suffix" }, { word: "כדורגלן", type: "base_suffix" }, { word: "חלילן", type: "base_suffix" }, { word: "תוכניתן", type: "base_suffix" }, { word: "מילון", type: "base_suffix" }, { word: "רפתן", type: "base_suffix" }, { word: "טבעוני", type: "base_suffix" }, { word: "צמחוני", type: "base_suffix" },
        { word: "טלוויזיה", type: "foreign" }, { word: "רדיו", type: "foreign" }, { word: "אינטרנט", type: "foreign" }, { word: "פודקאסט", type: "foreign" }, { word: "טלפון", type: "foreign" }, { word: "סמארטפון", type: "foreign" }, { word: "פלסטיק", type: "foreign" }, { word: "אקדמיה", type: "foreign" }, { word: "היסטוריה", type: "foreign" }, { word: "גיאוגרפיה", type: "foreign" }, { word: "מתמטיקה", type: "foreign" }, { word: "פיזיקה", type: "foreign" }, { word: "קונצרט", type: "foreign" }, { word: "תיאטרון", type: "foreign" }, { word: "סינמטק", type: "foreign" }, { word: "פרויקט", type: "foreign" }, { word: "מודל", type: "foreign" }, { word: "קורס", type: "foreign" }, { word: "סטודנט", type: "foreign" }, { word: "אוניברסיטה", type: "foreign" }, { word: "מוזיקה", type: "foreign" }, { word: "פסטיבל", type: "foreign" },
        { word: "תזמורת", type: "root_pattern" }, { word: "משקפיים", type: "root_pattern" }, { word: "שחקן", type: "root_pattern" }, { word: "רקדן", type: "root_pattern" }, { word: "זמר", type: "root_pattern" }, { word: "מקלדת", type: "root_pattern" }, { word: "מצלמה", type: "root_pattern" }, { word: "מסעדה", type: "root_pattern" }, { word: "מרפאה", type: "root_pattern" }, { word: "תסרוקת", type: "root_pattern" }, { word: "תלבושת", type: "root_pattern" }, { word: "מברשת", type: "root_pattern" }, { word: "מסרק", type: "root_pattern" }, { word: "משולש", type: "root_pattern" }, { word: "מרובע", type: "root_pattern" }, { word: "מחברת", type: "root_pattern" }, { word: "קלמר", type: "root_pattern" }, { word: "תלמיד", type: "root_pattern" }, { word: "מורה", type: "root_pattern" }, { word: "מנהל", type: "root_pattern" }, { word: "תרופה", type: "root_pattern" }, { word: "מעלית", type: "root_pattern" },
        { word: "רמזור", type: "blend" }, { word: "מגדלור", type: "blend" }, { word: "קרנף", type: "blend" }, { word: "מחזמר", type: "blend" }, { word: "מדחן", type: "blend" }, { word: "אופנוע", type: "blend" }, { word: "קולנוע", type: "blend" }, { word: "פלדלת", type: "blend" }, { word: "חיידק", type: "blend" }, { word: "רכבל", type: "blend" }, { word: "כדורגל", type: "blend" }, { word: "כדורסל", type: "blend" }, { word: "פסקזמן", type: "blend" }, { word: "חמצוואר", type: "blend" }, { word: "שלדג", type: "blend" }, { word: "קרמבו", type: "blend" }, { word: "ערפיח", type: "blend" }, { word: "דחפור", type: "blend" }, { word: "שמרטף", type: "blend" }, { word: "חיברק", type: "blend" }, { word: "רמנוע", type: "blend" },
        { word: "צה\"ל", type: "acronym" }, { word: "דו\"ח", type: "acronym" }, { word: "תפוז", type: "acronym" }, { word: "מנכ\"ל", type: "acronym" }, { word: "סמנכ\"ל", type: "acronym" }, { word: "או\"ם", type: "acronym" }, { word: "ארה\"ב", type: "acronym" }, { word: "תנ\"ך", type: "acronym" }, { word: "בג\"ץ", type: "acronym" }, { word: "שו\"ת", type: "acronym" }, { word: "ד\"ש", type: "acronym" }, { word: "ח\"כ", type: "acronym" }, { word: "ת\"א", type: "acronym" }, { word: "אחה\"צ", type: "acronym" }, { word: "מוצ\"ש", type: "acronym" }, { word: "עו\"ד", type: "acronym" }, { word: "רו\"ח", type: "acronym" }, { word: "מד\"א", type: "acronym" }, { word: "שב\"כ", type: "acronym" }, { word: "חב\"ד", type: "acronym" }, { word: "מע\"מ", type: "acronym" }, { word: "סקו\"ם", type: "acronym" }
    ];

    let score = 0;
    let streak = 0;
    let currentWordObj = null;
    let isAnimating = false;
    let gameTimer = null;
    let timeLeft = 60;
    const GAME_DURATION = 60;
    let audioCtx = null;

    const homeScreen = document.getElementById('home-screen');
    const gameScreen = document.getElementById('game-screen');
    const wordElement = document.getElementById('current-word');
    const correctAnswerDisplay = document.getElementById('correct-answer-display');
    const scoreElement = document.getElementById('score');
    const streakElement = document.getElementById('streak');
    const timeLeftElement = document.getElementById('time-left');
    const timerBar = document.getElementById('timer-bar');
    const lastScoreDisplay = document.getElementById('last-score-display');
    const buttons = document.querySelectorAll('.category-btn');

    function initAudio() {
        if (!audioCtx) {
            audioCtx = new (window.AudioContext || window.webkitAudioContext)();
        }
        if (audioCtx.state === 'suspended') {
            audioCtx.resume();
        }
    }

    function playSound(type) {
        if (!audioCtx) return;
        const osc = audioCtx.createOscillator();
        const gainNode = audioCtx.createGain();
        osc.connect(gainNode);
        gainNode.connect(audioCtx.destination);

        if (type === 'correct') {
            osc.type = 'sine';
            osc.frequency.setValueAtTime(800, audioCtx.currentTime);
            gainNode.gain.setValueAtTime(0.8, audioCtx.currentTime);
            gainNode.gain.exponentialRampToValueAtTime(0.001, audioCtx.currentTime + 0.2);
            osc.start();
            osc.stop(audioCtx.currentTime + 0.2);
        } else if (type === 'wrong') {
            osc.type = 'sawtooth';
            osc.frequency.setValueAtTime(150, audioCtx.currentTime);
            gainNode.gain.setValueAtTime(0.8, audioCtx.currentTime);
            gainNode.gain.exponentialRampToValueAtTime(0.001, audioCtx.currentTime + 0.3);
            osc.start();
            osc.stop(audioCtx.currentTime + 0.3);
        }
    }

    function startGame() {
        initAudio();
        score = 0;
        streak = 0;
        timeLeft = GAME_DURATION;
        isAnimating = false;
        
        updateScoreDisplay();
        timeLeftElement.textContent = timeLeft;
        timerBar.style.width = '100%';
        lastScoreDisplay.textContent = '';
        correctAnswerDisplay.style.opacity = '0';

        homeScreen.classList.add('hidden');
        gameScreen.classList.remove('hidden');

        setNewWord();
        startTimer();
    }

    function endGame() {
        clearInterval(gameTimer);
        gameScreen.classList.add('hidden');
        homeScreen.classList.remove('hidden');
        lastScoreDisplay.textContent = `ניקוד אחרון: ${score}`;
    }

    function startTimer() {
        gameTimer = setInterval(() => {
            if (isAnimating) return;
            timeLeft--;
            timeLeftElement.textContent = timeLeft;
            const percentage = (timeLeft / GAME_DURATION) * 100;
            timerBar.style.width = `${percentage}%`;

            if (timeLeft <= 0) {
                endGame();
            }
        }, 1000);
    }

    function getRandomWord() {
        return words[Math.floor(Math.random() * words.length)];
    }

    function setNewWord() {
        currentWordObj = getRandomWord();
        wordElement.textContent = currentWordObj.word;
        wordElement.className = '';
        correctAnswerDisplay.style.opacity = '0';
        isAnimating = false;
    }

    function updateScoreDisplay() {
        scoreElement.textContent = score;
        streakElement.textContent = streak;
    }

    function createParticle(text, color, targetBtn) {
        const rect = targetBtn.getBoundingClientRect();
        const x = rect.left + rect.width / 2;
        const y = rect.top;
        
        const particle = document.createElement('div');
        particle.textContent = text;
        particle.className = 'feedback-particles';
        particle.style.color = color;
        particle.style.left = x + 'px';
        particle.style.top = y + 'px';
        document.body.appendChild(particle);

        requestAnimationFrame(() => {
            particle.style.transform = `translate(-50%, -80px) scale(1.5)`;
            particle.style.opacity = '1';
        });

        setTimeout(() => {
            particle.style.opacity = '0';
            setTimeout(() => particle.remove(), 500);
        }, 500);
    }

    function handleAnswer(selectedType, buttonElement) {
        if (isAnimating || timeLeft <= 0) return;
        isAnimating = true;

        if (selectedType === currentWordObj.type) {
            streak++;
            const pointsGained = 10 * streak;
            score += pointsGained;
            wordElement.classList.add('correct-anim');
            createParticle(`+${pointsGained}`, 'var(--success-color)', buttonElement);
            playSound('correct');
            updateScoreDisplay();
            setTimeout(setNewWord, 400);
        } else {
            streak = 0;
            score = Math.max(0, score - 10);
            wordElement.classList.add('wrong-anim');
            createParticle('טעות!', 'var(--danger-color)', buttonElement);
            playSound('wrong');
            
            correctAnswerDisplay.textContent = `התשובה הנכונה: ${typeNamesHebrew[currentWordObj.type]}`;
            correctAnswerDisplay.style.opacity = '1';
            
            updateScoreDisplay();
            
            setTimeout(() => {
                wordElement.classList.remove('wrong-anim');
                setNewWord();
            }, 1500);
        }
    }

    buttons.forEach(button => {
        button.addEventListener('click', (e) => {
            handleAnswer(e.target.dataset.type, e.currentTarget);
        });
    });
</script>
</body>
</html>
